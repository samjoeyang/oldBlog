---
layout: post
status: publish
published: true
title: 一份Windows2000系统&ldquo;安全检查清单
author:
  display_name: Samjoe Yang
  login: blogerlogin
  email: youremail@example.com
  url: http://needis.me
author_login: blogerlogin
author_email: youremail@example.com
author_url: http://needis.me
wordpress_id: 25
wordpress_url: http://samjoeyang.wordpress.com/2005/08/12/%e4%b8%80%e4%bb%bdwindows2000%e7%b3%bb%e7%bb%9f%e2%80%9c%e5%ae%89%e5%85%a8%e6%a3%80%e6%9f%a5%e6%b8%85%e5%8d%95
date: '2005-08-12 06:44:53 +0800'
date_gmt: '2005-08-12 06:44:53 +0800'
categories:
- Network Security
tags:
- 安全
- 系统
- 检查
comments: []
---
<div id="msgcns!A634C4CD7A14B666!237" class="bvMsg">
<p align="center">　　Windows2000 含有很多的安全功能和选项，如果你合理的配置它们，那么windows 2000将会是一个很安全的操作系统.　　</p>
<blockquote>
<p>　　初级安全篇</p>
<p>　　1.物理安全 </p>
<p>　　服务器应该安放在安装了监视器的隔离房间内，并且监视器要保留15天以上的摄像记录。另外，机箱,键盘，电脑桌抽屉要上锁，以确保旁人即使进入房间也无法使用电脑，钥匙要放在另外的安全的地方。 </p>
<p>　　2.停掉Guest 帐号 </p>
<p>　　在计算机管理的用户里面把guest帐号停用掉，任何时候都不允许guest帐号登陆系统。为了保险起见，最好给guest 加一个复杂的密码，你可以打开记事本，在里面输入一串包含特殊字符,数字，字母的长字符串，然后把它作为guest帐号的密码拷进去。 </p>
<p>　　3．限制不必要的用户数量 </p>
<p>　　去掉所有的duplicate user 帐户, 测试用帐户, 共享帐号，普通部门帐号等等。用户组策略设置相应权限，并且经常检查系统的帐户，删除已经不在使用的帐户。这些帐户很多时候都是黑客们入侵系统的突破口，系统的帐户越多，黑客们得到合法用户的权限可能性一般也就越大。国内的nt/2000主机，如果系统帐户超过10个，一般都能找出一两个弱口令帐户。我曾经发现一台主机197个帐户中竟然有180个帐号都是弱口令帐户。 </p>
<p>　　4．创建2个管理员用帐号 </p>
<p>　　虽然这点看上去和上面这点有些矛盾，但事实上是服从上面的规则的。 创建一个一般权限帐号用来收信以及处理一些日常事物，另一个拥有Administrators 权限的帐户只在需要的时候使用。可以让管理员使用 &ldquo; RunAS&rdquo; 命令来执行一些需要特权才能作的一些工作，以方便管理。 </p>
<p>　　5．把系统administrator帐号改名 </p>
<p>　　大家都知道，windows 2000 的administrator帐号是不能被停用的，这意味着别人可以一遍又一边的尝试这个帐户的密码。把Administrator帐户改名可以有效的防止这一点。当然，请不要使用Admin之类的名字，改了等于没改，尽量把它伪装成普通用户，比如改成：guestone 。 </p>
<p>　　6．创建一个陷阱帐号 </p>
<p>　　什么是陷阱帐号? 创建一个名为&rdquo; Administrator&rdquo;的本地帐户，把它的权限设置成最低，什么事也干不了的那种，并且加上一个超过10位的超级复杂密码。这样可以让那些 Scripts 忙上一段时间了，并且可以借此发现它们的入侵企图。或者在它的login scripts上面做点手脚。 </p>
<p>　　7.把共享文件的权限从&rdquo;everyone&rdquo;组改成&ldquo;授权用户&rdquo; </p>
<p>　　&ldquo;everyone&rdquo; 在win2000中意味着任何有权进入你的网络的用户都能够获得这些共享资料。任何时候都不要把共享文件的用户设置成&rdquo;everyone&rdquo;组。包括打印共享，默认的属性就是&rdquo;everyone&rdquo;组的，一定不要忘了改。</p>
<p>　　8.使用安全密码 </p>
<p>　　一个好的密码对于一个网络是非常重要的，但是它是最容易被忽略的。前面的所说的也许已经可以说明这一点了。一些公司的管理员创建帐号的时候往往用公司名，计算机名，或者一些别的一猜就到的东西做用户名，然后又把这些帐户的密码设置得N简单，比如 &ldquo;welcome&rdquo;&ldquo;iloveyou&rdquo;&ldquo;letmein&rdquo;或者和用户名相同等等。这样的帐户应该要求用户首次登陆的时候更改成复杂的密码，还要注意经常更改密码。前些天在IRC和人讨论这一问题的时候，我们给好密码下了个定义：安全期内无法破解出来的密码就是好密码，也就是说，如果人家得到了你的密码文档，必须花43天或者更长的时间才能破解出来，而你的密码策略是42天必须改密码。 </p>
<p>　　9.设置屏幕保护密码 </p>
<p>　　很简单也很有必要，设置屏幕保护密码也是防止内部人员破坏服务器的一个屏障。注意不要使用OpenGL和一些复杂的屏幕保护程序，浪费系统资源，让他黑屏就可以了。还有一点，所有系统用户所使用的机器也最好加上屏幕保护密码。 </p>
<p>　　10． 使用NTFS格式分区 </p>
<p>　　把服务器的所有分区都改成NTFS格式。NTFS文件系统要比FAT,FAT32的文件系统安全得多。这点不必多说，想必大家得服务器都已经是NTFS的了。 </p>
<p>　　11．运行防毒软件 </p>
<p>　　我见过的Win2000/Nt服务器从来没有见到有安装了防毒软件的，其实这一点非常重要。一些好的杀毒软件不仅能杀掉一些著名的病毒，还能查杀大量木马和后门程序。这样的话，&ldquo;黑客&rdquo;们使用的那些有名的木马就毫无用武之地了。不要忘了经常升级病毒库。</p>
<p>　　12．保障备份盘的安全 </p>
<p>　　一旦系统资料被破坏，备份盘将是你恢复资料的唯一途径。备份完资料后，把备份盘放在安全的地方。千万别把资料备份在同一台服务器上，那样的话，还不如不要备份。</p>
<p>　　中级安全篇： </p>
<p>　　1．利用win2000的安全配置工具来配置策略 </p>
<p>　　微软提供了一套的基于MMC(管理控制台)安全配置和分析工具，利用他们你可以很方便的配置你的服务器以满足你的要求。具体内容请参考微软主页： </p>
<p>　　http://www.microsoft.com/windows2000/techinfo/howitworks/security/sctoolset.asp </p>
<p>　　2．关闭不必要的服务 </p>
<p>　　windows 2000 的 Terminal Services（终端服务），IIS ,和RAS都可能给你的系统带来安全漏洞。为了能够在远程方便的管理服务器，很多机器的终端服务都是开着的，如果你的也开了，要确认你已经正确的配置了终端服务。有些恶意的程序也能以服务方式悄悄的运行。要留意服务器上面开启的所有服务，中期性(每天)的检查他们。下面是C2级别安装的默认服务： </p>
<p>　　Computer Browser service TCP/IP NetBIOS Helper </p>
<p>　　Microsoft DNS server Spooler </p>
<p>　　NTLM SSP Server </p>
<p>　　RPC Locator WINS </p>
<p>　　RPC service Workstation </p>
<p>　　Netlogon Event log </p>
<p>　　3．关闭不必要的端口 </p>
<p>　　关闭端口意味着减少功能，在安全和功能上面需要你作一点决策。如果服务器安装在防火墙的后面，冒的险就会少些，但是，永远不要认为你可以高枕无忧了。用端口扫描器扫描系统所开放的端口，确定开放了哪些服务是黑客入侵你的系统的第一步。system32driversetcservices 文件中有知名端口和服务的对照表可供参考。具体方法为： </p>
<p>　　网上邻居>属性>本地连接>属性>internet 协议(tcp/ip)>属性>高级>选项>tcp/ip筛选>属性 打开tcp/ip筛选，添加需要的tcp,udp,协议即可。 </p>
<p>　　4．打开审核策略 </p>
<p>　　开启安全审核是win2000最基本的入侵检测方法。当有人尝试对你的系统进行某些方式（如尝试用户密码,改变帐户策略，未经许可的文件访问等等）入侵的时候，都会被安全审核记录下来。很多的管理员在系统被入侵了几个月都不知道，直到系统遭到破坏。下面的这些审核是必须开启的，其他的可以根据需要增加： </p>
<p>　　策略 设置 </p>
<p>　　审核系统登陆事件 成功，失败 </p>
<p>　　审核帐户管理 成功，失败 </p>
<p>　　审核登陆事件 成功，失败 </p>
<p>　　审核对象访问 成功 </p>
<p>　　审核策略更改 成功，失败 </p>
<p>　　审核特权使用 成功，失败 </p>
<p>　　审核系统事件 成功，失败 </p>
<p>　　5.开启密码密码策略 　　 </p>
<p>　　策略 设置 </p>
<p>　　密码复杂性要求 启用 </p>
<p>　　密码长度最小值 6位 </p>
<p>　　强制密码历史 5 次 </p>
<p>　　强制密码历史 42 天</p>
<p>　　6．开启帐户策略</p>
<p>　　策略 设置 </p>
<p>　　复位帐户锁定计数器 20分钟 </p>
<p>　　帐户锁定时间 20分钟 </p>
<p>　　帐户锁定阈值 3次 </p>
<p>　　7．设定安全记录的访问权限</p>
<p>　　安全记录在默认情况下是没有保护的，把他设置成只有Administrator和系统帐户才有权访问。 </p>
<p>　　8．把敏感文件存放在另外的文件服务器中 </p>
<p>　　虽然现在服务器的硬盘容量都很大，但是你还是应该考虑是否有必要把一些重要的用户数据(文件，数据表，项目文件等)存放在另外一个安全的服务器中，并且经常备份它们。 </p>
<p>　　9.不让系统显示上次登陆的用户名 　　 </p>
<p>　　默认情况下，终端服务接入服务器时，登陆对话框中会显示上次登陆的帐户名，本地的登陆对话框也是一样。这使得别人可以很容易的得到系统的一些用户名，进而作密码猜测。修改注册表可以不让对话框里显示上次登陆的用户名，具体是： </p>
<p>　　HKLMSoftwareMicrosoftWindowsNTCurrentVersion<br />WinlogonDontDisplayLastUserName </p>
<p>　　把 REG_SZ 的键值改成 1 . </p>
<p>　　10．禁止建立空连接</p>
<p>　　默认情况下，任何用户通过空连接连上服务器，进而枚举出帐号，猜测密码。我们可以通过修改注册表来禁止建立空连接： </p>
<p>　　Local_MachineSystemCurrentControlSetControlLSA-RestrictAnonymous 的值改成&rdquo;1&rdquo;即可。 </p>
<p>　　10.到微软网站下载最新的补丁程序 </p>
<p>　　很多网络管理员没有访问安全站点的习惯，以至于一些漏洞都出了很久了，还放着服务器的漏洞不补给人家当靶子用。谁也不敢保证数百万行以上代码的Win2000不出一点安全漏洞，经常访问微软和一些安全站点，下载最新的service pack和漏洞补丁，是保障服务器长久安全的唯一方法。</p>
<p>　　高级篇 </p>
<p>　　1. 关闭 DirectDraw </p>
<p>　　这是C2级安全标准对视频卡和内存的要求。关闭DirectDraw可能对一些需要用到DirectX的程序有影响（比如游戏，在服务器上玩星际争霸？我晕..），但是对于绝大多数的商业站点都应该是没有影响的。 修改注册表 HKLMSYSTEMCurrentControlSetControlGraphicsDriversDCI 的Timeout(REG_DWORD)为 0 即可。 </p>
<p>　　2.关闭默认共享 </p>
<p>　　win2000安装好以后，系统会创建一些隐藏的共享，你可以在cmd下打 net share 查看他们。网上有很多关于IPC入侵的文章，相信大家一定对它不陌生。要禁止这些共享 ，打开 管理工具>计算机管理>共享文件夹>共享 在相应的共享文件夹上按右键，点停止共享即可，不过机器重新启动后，这些共享又会重新开启的。 　　 </p>
<p>　　默认共享目录 路径和功能 </p>
<p>　　C$ D$ E$ 每个分区的根目录。Win2000 Pro版中，只有Administrator </p>
<p>　　和Backup Operators组成员才可连接，Win2000 Server版本 </p>
<p>　　Server Operatros组也可以连接到这些共享目录 </p>
<p>　　ADMIN$ %SYSTEMROOT% 远程管理用的共享目录。它的路径永远都 </p>
<p>　　指向Win2000的安装路径，比如 c:winnt </p>
<p>　　FAX$ 在Win2000 Server中，FAX$在fax客户端发传真的时候会到。 </p>
<p>　　IPC$ 空连接。IPC$共享提供了登录到系统的能力。 </p>
<p>　　NetLogon 这个共享在Windows 2000 服务器的Net Login 服务在处理登陆域请求时用到 </p>
<p>　　PRINT$ %SYSTEMROOT%SYSTEM32SPOOLDRIVERS 用户远程管理打印机 </p>
<p>　　3.禁止dump file的产生</p>
<p>　　dump文件在系统崩溃和蓝屏的时候是一份很有用的查找问题的资料(不然我就照字面意思翻译成垃圾文件了)。然而，它也能够给黑客提供一些敏感信息比如一些应用程序的密码等。要禁止它，打开 控制面板>系统属性>高级>启动和故障恢复 把 写入调试信息 改成无。要用的时候，可以再重新打开它。 </p>
<p>　　4.使用文件加密系统EFS </p>
<p>　　Windows2000 强大的加密系统能够给磁盘，文件夹，文件加上一层安全保护。这样可以防止别人把你的硬盘挂到别的机器上以读出里面的数据。记住要给文件夹也使用EFS,而不仅仅是单个的文件。 有关EFS的具体信息可以查看 </p>
<p>　　http://www.microsoft.com/windows2000/techinfo/howitworks/security/encrypt.asp </p>
<p>　　5.加密temp文件夹 </p>
<p>　　一些应用程序在安装和升级的时候，会把一些东西拷贝到temp文件夹，但是当程序升级完毕或关闭的时候，它们并不会自己清除temp文件夹的内容。所以，给temp文件夹加密可以给你的文件多一层保护。 </p>
<p>　　6.锁住注册表 </p>
<p>　　在windows2000中，只有administrators和Backup Operators才有从网络上访问注册表的权限。如果你觉得还不够的话，可以进一步设定注册表访问权限，详细信息请参考： </p>
<p>　　http://support.microsoft.com/support/kb/articles/Q153/1/83.asp </p>
<p>　　7.关机时清除掉页面文件</p>
<p>　　页面文件也就是调度文件，是win2000用来存储没有装入内存的程序和数据文件部分的隐藏文件。一些第三方的程序可以把一些没有的加密的密码存在内存中，页面文件中也可能含有另外一些敏感的资料。 要在关机的时候清楚页面文件，可以编辑注册表 </p>
<p>　　HKLMSYSTEMCurrentControlSetControlSession ManagerMemory Management </p>
<p>　　把ClearPageFileAtShutdown的值设置成1。 </p>
<p>　　8.禁止从软盘和CD Rom启动系统 </p>
<p>　　一些第三方的工具能通过引导系统来绕过原有的安全机制。如果你的服务器对安全要求非常高，可以考虑使用可移动软盘和光驱。把机箱锁起来扔不失为一个好方法。 </p>
<p>　　9.考虑使用智能卡来代替密码 </p>
<p>　　对于密码，总是使安全管理员进退两难，容易受到 10phtcrack 等工具的攻击，如果密码太复杂，用户把为了记住密码，会把密码到处乱写。如果条件允许，用智能卡来代替复杂的密码是一个很好的解决方法。</p>
<p>　　10.考虑使用IPSec </p>
<p>　　正如其名字的含义，IPSec 提供 IP 数据包的安全性。IPSec 提供身份验证、完整性和可选择的机密性。发送方计算机在传输之前加密数据，而接收方计算机在收到数据之后解密数据。利用IPSec可以使得系统的安全性能大大增强。有关IPSes的详细信息可以参考： http://www.microsoft.com/china/technet/security/ipsecloc.asp</p>
</blockquote>
</div>
